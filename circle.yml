machine:
  pre:
    - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash
  timezone:
    Asia/Tokyo
  xcode:
    version: "6.4"
  node:
    version: "0.10.34"
  environment:
    XCODE_SCHEME: App
    XCODE_PROJECT: App.xcodeproj

dependencies:
  pre:
    - npm install -g titanium alloy tisdk
    - npm install

test:
  pre:
    - gulp jshint
    - alloy compile --config platform=ios
  override:
    - npm test

deployment:
  adhoc:
    branch: adhoc
    commands:
      - sudo gem install cupertino -v 1.3.2
      - /bin/bash misc/keychain.sh
#      - tisdk install 4.0.0.GA
      - /bin/bash misc/adhoc.sh